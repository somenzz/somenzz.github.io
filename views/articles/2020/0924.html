<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>手摸手，带你畅玩docker | somenzz&#39;s blog</title>
    <meta name="description" content="禅与计算机编程艺术，公众号：Python七号">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#42b983">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/icon_vuepress_reco.png">
  <link rel="mask-icon" href="/icon_vuepress_reco.svg" color="#42b983">
  <meta name="msapplication-TileImage" content="/icon_vuepress_reco.png">
  <meta name="msapplication-TileColor" content="#000000">
    <meta property="article:published_time" content="Thu Sep 24 2020 08:00:00 GMT+0800 (GMT+08:00)"><meta property="article:modified_time" content="Fri Sep 25 2020 07:01:08 GMT+0800 (GMT+08:00)"><meta property="og:site_name" content="somenzz&#39;s blog"><meta property="og:title" content="手摸手，带你畅玩docker"><meta property="og:type" content="website"><meta property="og:url" content="/views/articles/2020/0924.html"><meta name="twitter:title" content="手摸手，带你畅玩docker"><meta name="twitter:url" content="/views/articles/2020/0924.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:label1" content="Written by"><meta name="twitter:label2" content="Filed under"><meta name="twitter:data2" content="Docker"><meta property="article:tag" content="Docker">
    <link rel="preload" href="/assets/css/0.styles.f5bbbaf3.css" as="style"><link rel="preload" href="/assets/js/app.4e05e597.js" as="script"><link rel="preload" href="/assets/js/4.8584deb7.js" as="script"><link rel="preload" href="/assets/js/1.8dfdb017.js" as="script"><link rel="preload" href="/assets/js/55.567c2917.js" as="script"><link rel="preload" href="/assets/js/12.67b2ec68.js" as="script"><link rel="prefetch" href="/assets/js/10.3da738a2.js"><link rel="prefetch" href="/assets/js/11.e94a796f.js"><link rel="prefetch" href="/assets/js/13.8ec73afc.js"><link rel="prefetch" href="/assets/js/14.94a969d7.js"><link rel="prefetch" href="/assets/js/15.f321a22a.js"><link rel="prefetch" href="/assets/js/16.09569a56.js"><link rel="prefetch" href="/assets/js/17.e5eef089.js"><link rel="prefetch" href="/assets/js/18.238a704b.js"><link rel="prefetch" href="/assets/js/19.f40fb3e4.js"><link rel="prefetch" href="/assets/js/20.bfccc964.js"><link rel="prefetch" href="/assets/js/21.45fda80d.js"><link rel="prefetch" href="/assets/js/22.3fefdda6.js"><link rel="prefetch" href="/assets/js/23.e2cc9dc3.js"><link rel="prefetch" href="/assets/js/24.5d320e6d.js"><link rel="prefetch" href="/assets/js/25.c6b3092b.js"><link rel="prefetch" href="/assets/js/26.d66b9c5c.js"><link rel="prefetch" href="/assets/js/27.410dd872.js"><link rel="prefetch" href="/assets/js/28.0ba350c4.js"><link rel="prefetch" href="/assets/js/29.b1d2d54c.js"><link rel="prefetch" href="/assets/js/30.91b108db.js"><link rel="prefetch" href="/assets/js/31.23ae0784.js"><link rel="prefetch" href="/assets/js/32.15d3d9f3.js"><link rel="prefetch" href="/assets/js/33.4b9afd7a.js"><link rel="prefetch" href="/assets/js/34.d16f670f.js"><link rel="prefetch" href="/assets/js/35.ce4a93fd.js"><link rel="prefetch" href="/assets/js/36.20f8fb4e.js"><link rel="prefetch" href="/assets/js/37.62809e9c.js"><link rel="prefetch" href="/assets/js/38.bdd9ab72.js"><link rel="prefetch" href="/assets/js/39.f88efdf1.js"><link rel="prefetch" href="/assets/js/40.a1ca4cea.js"><link rel="prefetch" href="/assets/js/41.bf87d46d.js"><link rel="prefetch" href="/assets/js/42.e9217ada.js"><link rel="prefetch" href="/assets/js/43.16e017e5.js"><link rel="prefetch" href="/assets/js/44.4515ed95.js"><link rel="prefetch" href="/assets/js/45.246e4fef.js"><link rel="prefetch" href="/assets/js/46.d1137bf2.js"><link rel="prefetch" href="/assets/js/47.a85e605a.js"><link rel="prefetch" href="/assets/js/48.3b12ec3d.js"><link rel="prefetch" href="/assets/js/49.f856bd13.js"><link rel="prefetch" href="/assets/js/5.ee0514d1.js"><link rel="prefetch" href="/assets/js/50.e294c1f9.js"><link rel="prefetch" href="/assets/js/51.f71632c8.js"><link rel="prefetch" href="/assets/js/52.fafa73e8.js"><link rel="prefetch" href="/assets/js/53.6da9a412.js"><link rel="prefetch" href="/assets/js/54.bc246058.js"><link rel="prefetch" href="/assets/js/56.c85b5182.js"><link rel="prefetch" href="/assets/js/57.cf55e62e.js"><link rel="prefetch" href="/assets/js/58.303e0572.js"><link rel="prefetch" href="/assets/js/59.438abd78.js"><link rel="prefetch" href="/assets/js/6.01a6a45b.js"><link rel="prefetch" href="/assets/js/60.1519cc7d.js"><link rel="prefetch" href="/assets/js/61.b1df42a0.js"><link rel="prefetch" href="/assets/js/62.10ece671.js"><link rel="prefetch" href="/assets/js/63.b24a765f.js"><link rel="prefetch" href="/assets/js/64.097fdb70.js"><link rel="prefetch" href="/assets/js/7.9fa224a7.js"><link rel="prefetch" href="/assets/js/8.fa08444b.js"><link rel="prefetch" href="/assets/js/9.b605518f.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.3c5059e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f5bbbaf3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container" data-v-319dd33c><div data-v-319dd33c><div id="loader-wrapper" class="loading-wrapper" data-v-4b73742e data-v-319dd33c data-v-319dd33c><div class="loader-main" data-v-4b73742e><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div><div data-v-4b73742e></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-1e2a0cc0 data-v-319dd33c data-v-319dd33c><h3 class="title" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0>somenzz's blog</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><input type="password" value="" data-v-1e2a0cc0> <span data-v-1e2a0cc0>Konck! Knock!</span> <button data-v-1e2a0cc0>OK</button></label> <div class="footer" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><span data-v-1e2a0cc0><i class="iconfont reco-theme" data-v-1e2a0cc0></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-1e2a0cc0>vuePress-theme-reco</a></span> <span data-v-1e2a0cc0><i class="iconfont reco-copyright" data-v-1e2a0cc0></i> <a data-v-1e2a0cc0><span data-v-1e2a0cc0>somenzz</span>
            
          <span data-v-1e2a0cc0>2018 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-319dd33c><header class="navbar" data-v-319dd33c><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.jpg" alt="somenzz's blog" class="logo"> <span class="site-name">somenzz's blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/好课推荐/" class="nav-link"><i class="iconfont undefined"></i>
  好课推荐
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器/" class="nav-link"><i class="iconfont undefined"></i>
  服务器
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔/" class="nav-link"><i class="iconfont undefined"></i>
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/信息安全/" class="nav-link"><i class="iconfont undefined"></i>
  信息安全
</a></li><li class="dropdown-item"><!----> <a href="/categories/电子书/" class="nav-link"><i class="iconfont undefined"></i>
  电子书
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/somenzz/activities" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  知乎
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/somenzz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/94303315d3f7" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://me.csdn.net/blog/somenzz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/python/python_seven.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  公众号-Python七号
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-319dd33c></div> <aside class="sidebar" data-v-319dd33c><div class="personal-info-wrapper" data-v-6c8ffc9c><img src="/profile.png" alt="author-avatar" class="personal-img" data-v-6c8ffc9c> <h3 class="name" data-v-6c8ffc9c>
    somenzz
  </h3> <div class="num" data-v-6c8ffc9c><div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>49</h3> <h6 data-v-6c8ffc9c>文章</h6></div> <div data-v-6c8ffc9c><h3 data-v-6c8ffc9c>45</h3> <h6 data-v-6c8ffc9c>标签</h6></div></div> <hr data-v-6c8ffc9c></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      分类
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/数据库/" class="nav-link"><i class="iconfont undefined"></i>
  数据库
</a></li><li class="dropdown-item"><!----> <a href="/categories/好课推荐/" class="nav-link"><i class="iconfont undefined"></i>
  好课推荐
</a></li><li class="dropdown-item"><!----> <a href="/categories/算法/" class="nav-link"><i class="iconfont undefined"></i>
  算法
</a></li><li class="dropdown-item"><!----> <a href="/categories/服务器/" class="nav-link"><i class="iconfont undefined"></i>
  服务器
</a></li><li class="dropdown-item"><!----> <a href="/categories/随笔/" class="nav-link"><i class="iconfont undefined"></i>
  随笔
</a></li><li class="dropdown-item"><!----> <a href="/categories/Python/" class="nav-link"><i class="iconfont undefined"></i>
  Python
</a></li><li class="dropdown-item"><!----> <a href="/categories/工具/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/categories/前端/" class="nav-link"><i class="iconfont undefined"></i>
  前端
</a></li><li class="dropdown-item"><!----> <a href="/categories/信息安全/" class="nav-link"><i class="iconfont undefined"></i>
  信息安全
</a></li><li class="dropdown-item"><!----> <a href="/categories/电子书/" class="nav-link"><i class="iconfont undefined"></i>
  电子书
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  标签
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      联系我
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.zhihu.com/people/somenzz/activities" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-bokeyuan"></i>
  知乎
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/somenzz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.jianshu.com/u/94303315d3f7" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-jianshu"></i>
  简书
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://me.csdn.net/blog/somenzz" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-csdn"></i>
  CSDN
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/views/python/python_seven.html" class="nav-link"><i class="iconfont reco-wechat"></i>
  公众号-Python七号
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>手摸手，带你畅玩docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/views/articles/2020/0924.html#步骤-0-linux-非-root-用户使用-docker" class="sidebar-link">步骤 0: linux 非 root 用户使用 docker</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-1：下载镜像文件" class="sidebar-link">步骤 1：下载镜像文件</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-2：查看镜像文件，修改镜像存放位置" class="sidebar-link">步骤 2：查看镜像文件，修改镜像存放位置</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-3：运行容器" class="sidebar-link">步骤 3：运行容器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-4：复制文件，路径映射" class="sidebar-link">步骤 4：复制文件，路径映射</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-5：网络配置、端口映射" class="sidebar-link">步骤 5：网络配置、端口映射</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-6：自定义镜像：保存修改后的容器至新的镜像" class="sidebar-link">步骤 6：自定义镜像：保存修改后的容器至新的镜像</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-7：发布镜像" class="sidebar-link">步骤 7：发布镜像</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#步骤-8：管理本地镜像和容器" class="sidebar-link">步骤 8：管理本地镜像和容器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#系统性的-docker-学习资料" class="sidebar-link">系统性的 docker 学习资料</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#容器比虚拟机的优势" class="sidebar-link">容器比虚拟机的优势</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/views/articles/2020/0924.html#小结" class="sidebar-link">小结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-1e2a0cc0 data-v-319dd33c><h3 class="title" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0>手摸手，带你畅玩docker</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><input type="password" value="" data-v-1e2a0cc0> <span data-v-1e2a0cc0>Konck! Knock!</span> <button data-v-1e2a0cc0>OK</button></label> <div class="footer" style="display:none;" data-v-1e2a0cc0 data-v-1e2a0cc0><span data-v-1e2a0cc0><i class="iconfont reco-theme" data-v-1e2a0cc0></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-1e2a0cc0>vuePress-theme-reco</a></span> <span data-v-1e2a0cc0><i class="iconfont reco-copyright" data-v-1e2a0cc0></i> <a data-v-1e2a0cc0><span data-v-1e2a0cc0>somenzz</span>
            
          <span data-v-1e2a0cc0>2018 - </span>
          2020
        </a></span></div></div> <div data-v-319dd33c><main class="page"><div class="page-title" style="display:none;"><h1>手摸手，带你畅玩docker</h1> <hr> <div data-v-484a899e><i class="iconfont reco-account" data-v-484a899e><span data-v-484a899e>somenzz</span></i> <i class="iconfont reco-date" data-v-484a899e><span data-v-484a899e>2020-09-24</span></i> <i class="iconfont reco-eye" data-v-484a899e><span id="/views/articles/2020/0924.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-484a899e><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <i class="iconfont reco-tag tags" data-v-484a899e><span class="tag-item" data-v-484a899e>
      Docker
    </span></i></div></div> <div class="theme-reco-content content__default" style="display:none;"><p>很多新手面对 docker 一脸茫然，于是我想按照自己的理解帮助新手快速入门 docker，便有了下文。</p> <p>如果你了解虚拟机，那么可以对比着理解，计算机的世界里，死记硬背是行不通的，必须理解，只有深刻理解了的工具才能更好的使用它。docker 就是一个进化后的虚拟机，比虚拟机更轻巧，更灵活，更节约系统资源。</p> <p>如果不了解虚拟机，可以把它比作程序的集装箱，把程序及运行环境都放在集装箱里面，无需拆卸集装箱程序就可以运行，把这个集装箱迁移到任何地方，程序都可以运行，无需额外的环境配置（不需要拆箱）。有了docker，所有的程序都只要是以 docker 形式发布，就都是完全跨平台的了。</p> <p>所有说 docker 才是 IT 系统的基础设施，值得每个程序员去学习和使用。</p> <p>虚拟机有个软件叫 vmware workstation，对应的，docker 有个软件叫 docker desktop（社区版），这两个软件都是提供虚拟化的基石。对于个人电脑，必须安装 docker desktop 才能使用 docker，在搜索引擎一搜，从官网下载即可，目前 windows，mac，linux 都可以安装 docker desktop。</p> <h2 id="步骤-0-linux-非-root-用户使用-docker"><a href="#步骤-0-linux-非-root-用户使用-docker" class="header-anchor">#</a> 步骤 0: linux 非 root 用户使用 docker</h2> <p>如果是 linux，可执行下述命令自动下载和安装，安装成功后已默认设置开机启动并自动启动。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">wget</span> -qO- https://get.docker.com/ <span class="token operator">|</span> <span class="token function">sh</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行后，会有一个提示，意思是非 root 用户如果想直接运行 docker，需要将该用户添加到 docker 用户组中，然后重新登陆。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>$ <span class="token function">sudo</span> <span class="token function">usermod</span> -aG docker aaron  <span class="token comment">#这里的aaron是用户名</span>
$ <span class="token comment">#然后重新登陆</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>mac 和 windows 直接从官网下载安装即可。</p> <p>假定现在你已经安装了 docker desktop。</p> <p>安装完后，打开终端，输入 docker 命令回车，你会看到 docker 所支持的命令及简洁的帮助文档，如果英文好一点的化，基本已经会了，了解具体的命令可以执行 <code>docker help 命令</code> 的形式查看具体命令的帮助信息，这个技能必须会，比用的时候再去网上找命令要高效的多。记住这一点，现在如果看不懂还没关系，假以时日，你自然会懂。</p> <p>接下来干什么？ 先明确我要用 docker 干什么，假如，你想安装一个 docker 版的 ubuntu 玩一玩。</p> <h2 id="步骤-1：下载镜像文件"><a href="#步骤-1：下载镜像文件" class="header-anchor">#</a> 步骤 1：下载镜像文件</h2> <p>如果你用虚拟机的话，你需要下载 ubuntu 的 iso 文件，然后再用虚拟机安装这个 iso，最后启动 ubuntu。这个 iso 文件，我们叫它操作系统的镜像，就是镜像文件。</p> <p>同理，如果用 docker 的话，也需要下下载 docker 版的 ubuntu 镜像（英文叫 image），这个镜像文件比虚拟机的 iso 文件要小的多，而且下载后不需要安装，直接启动就行了，凭这一点，我就已经抛弃虚拟机了。</p> <p>那么接下来我去哪里找 docker 版的 ubuntu 镜像呢？ 很简单，docker 已经为你想好了，那就是 search 命令，执行 <code>docker search ubuntu</code> 看看，一般情况下选择第一个即可，或者根据 star 的数量、官方标志来选择，记住选择的镜像名字，这里是 ubuntu。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj078s1vk7j31sl0u0ki0.jpg" alt="docker search ubuntu"></p> <p>确定后我们执行 <code>docker pull ubuntu</code> 即可下载此 ubuntu 镜像:</p> <p>下载过程如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
e6ca3592b144: Pull complete
534a5505201d: Pull complete
990916bd23bb: Pull complete
Digest: sha256:cbcf86d7781dbb3a6aa2bcea25403f6b0b443e20b9959165cf52d2cc9608e4b9
Status: Downloaded newer image <span class="token keyword">for</span> ubuntu:latest
docker.io/library/ubuntu:latest
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>下载过程中，你可以再开个窗口，执行 docker help pull 看看此命令的帮助文档，看看描述能否理解：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">help</span> pull

Usage:	docker pull <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> NAME<span class="token punctuation">[</span>:TAG<span class="token operator">|</span>@DIGEST<span class="token punctuation">]</span>

Pull an image or a repository from a registry

Options:
  -a, --all-tags                Download all tagged images <span class="token keyword">in</span> the repository
      --disable-content-trust   Skip image verification <span class="token punctuation">(</span>default <span class="token boolean">true</span><span class="token punctuation">)</span>
      --platform string         Set platform <span class="token keyword">if</span> server is multi-platform
                                capable
  -q, --quiet                   Suppress verbose output
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>比如这里的 <code>Usage:	docker pull [OPTIONS] NAME[:TAG|@DIGEST]</code>，可以看到中括号包起来的是可选的，没有包起来的都是必输的，名称后面可以加个冒号和标签，就可以下载该名称下某个具体标签的镜像，如果不写 tag，那就默认下载最新的。</p> <p>至此，镜像文件已经下载完成。</p> <h2 id="步骤-2：查看镜像文件，修改镜像存放位置"><a href="#步骤-2：查看镜像文件，修改镜像存放位置" class="header-anchor">#</a> 步骤 2：查看镜像文件，修改镜像存放位置</h2> <p>查看自己下载了哪些镜像呢，执行 <code>docker images</code> ：</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj07zzyywgj318g0bsq9m.jpg" alt="docker images"></p> <p>从上图看到，镜像文件有的还挺大，但仍然比完整的操作系统镜像要小，他们存储在磁盘的什么位置呢？ 默认情况下：</p> <p>如果是 mac，镜像文件保存在 <code>~/Library/Containers/com.docker.docker</code> 路径下，</p> <p>如果是 linux，可通过 <code>docker info</code> 命令查看 Docker 默认的存储路径，通常位于：<code>/var/lib/docker</code>:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">sudo</span> docker info <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">&quot;Docker Root Dir&quot;</span>
<span class="token comment"># Docker Root Dir: /var/lib/docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>docker info 还可以查看容器的池、已用数据大小、总数据大小，基本容器大小、当前运行容器数量等。</p> <p>随着镜像文件越来越多，占有空间越来越大，你可能会产生想把镜像文件存放在其他位置的想法：</p> <p><strong>如果是 mac</strong> 第一种方法是通过修改 docker 的配置来实现：点击顶部菜单烂中的 docker 图标 -&gt; Preferences -&gt; Resources -&gt; ADVANCED 拖到最后，Disk image location，如下图，然后点击 browse 来将 imgae 保存到新的位置。</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj0803rblrj31ae0u0wjc.jpg" alt="mac配置image路径"></p> <p>上图中还可以看到 docker 其它的一些资源使用信息如cpu、内存、磁盘也是在此配置的。</p> <p>第二种方法是建立软链接：就是先把这个文件夹移动到其他（你的其他硬盘或分区）位置，然后再将新位置创建一个软链接到这里来。具体来说：</p> <p>第一步：将 docker 文件夹复制到新位置，由于 socket 文件是不允许直接复制的，可以用快速增量备份工具 rsync 来复制，并将原来文件夹重命名为 com.docker.docker.old：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token function">rsync</span> -a ~/Library/Containers/com.docker.docker/ /Volumes/path/xxx
<span class="token function">mv</span> com.docker.docker com.docker.docker.old
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第二步：将新路径软链接过来：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token builtin class-name">cd</span> ~/Library/Containers
<span class="token function">ln</span> -s /Volumes/path/xxxx com.docker.docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>第三步：启动docker，如果正常启动，就删除掉原来的 docker 文件夹 com.docker.docker.old。</p> <p><strong>如果是 linux</strong> 第一种方法就是通过修改 docker 的配置文件来指定镜像的存放位置:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token comment"># 停止 docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> docker stop

<span class="token comment"># 编辑文件 docker-overlay.conf</span>
<span class="token builtin class-name">cd</span> /etc/systemd/system/docker.service.d <span class="token comment"># 如果没有docker.service.d 则创建该路径</span>
<span class="token function">sudo</span> <span class="token function">vim</span> docker-overlay.conf  <span class="token comment"># 如果没有则创建该文件</span>
<span class="token comment"># 在文件中添加如下内容：</span>
<span class="token comment">#  [Service]</span>
<span class="token comment">#  ExecStart=</span>
<span class="token comment">#  ExecStart=/usr/bin/dockerd --graph=&quot;新的存储路径&quot; --storage-driver=overlay</span>

<span class="token comment"># 启动 docker</span>
<span class="token function">sudo</span> <span class="token function">service</span> docker start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>第二种方法和 mac 的类似，不再赘述。</p> <h2 id="步骤-3：运行容器"><a href="#步骤-3：运行容器" class="header-anchor">#</a> 步骤 3：运行容器</h2> <p>如果说容器是一个水杯，那镜像就是水，但这个水不会因倒入水杯而减少。运行容器的过程可以比作将水倒入水杯，做各种加工后对外提供服务的过程。</p> <p>现在我们将前述 ubuntu 镜像装入一个新的容器：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run ubuntu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>命令里的 ubuntu 即执行 <code>docker images</code> 中对应的 REPOSITORY 名称。</p> <p>使用 <code>docker ps -a</code>  查看已运行的容器信息</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj0sl90fjmj324m0b07dh.jpg" alt="docker ps -a"></p> <p>可以看到容器的id，所属镜像，执行的命令、创建的时间、状态、端口、名称等信息，这里的状态为退出，是因为我们启动容器时没有指定持续运行的进程，因此容器会很快自动退出。</p> <p>运行容器时可以指定容器的名称，端口映射，路径映射，MAC地址等信息。</p> <p>比如以交互的方式运行一个新 ubuntu 容器，并指定它的名称为 my-ubuntu，主机名为 ubuntu:</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker run -it --hostname<span class="token operator">=</span>ubuntu --name<span class="token operator">=</span>my-ubuntu ubuntu /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>执行后，你将以 root 身份进入容器内部，现在你已经进入了 ubuntu 的环境，除了没有图形界面，其他操作没有区别，如下所示：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker run -it --hostname<span class="token operator">=</span>ubuntu --name<span class="token operator">=</span>my-ubuntu ubuntu /bin/bash
root@ubuntu:/<span class="token comment"># whoami</span>
root
root@ubuntu:/<span class="token comment"># uname -a</span>
Linux ubuntu <span class="token number">4.19</span>.76-linuxkit <span class="token comment">#1 SMP Tue May 26 11:42:35 UTC 2020 x86_64 x86_64 x86_64 GNU/Linux</span>
root@ubuntu:/<span class="token comment"># ls</span>
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@ubuntu:/<span class="token comment"># apt update</span>
Get:1 http://security.ubuntu.com/ubuntu focal-security InRelease <span class="token punctuation">[</span><span class="token number">107</span> kB<span class="token punctuation">]</span>
Get:2 http://archive.ubuntu.com/ubuntu focal InRelease <span class="token punctuation">[</span><span class="token number">265</span> kB<span class="token punctuation">]</span>
Get:3 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages <span class="token punctuation">[</span><span class="token number">1078</span> B<span class="token punctuation">]</span>
Get:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease <span class="token punctuation">[</span><span class="token number">111</span> kB<span class="token punctuation">]</span>
Get:5 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages <span class="token punctuation">[</span><span class="token number">245</span> kB<span class="token punctuation">]</span>
Get:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease <span class="token punctuation">[</span><span class="token number">98.3</span> kB<span class="token punctuation">]</span>
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
Fetched <span class="token number">14.6</span> MB <span class="token keyword">in</span> 32s <span class="token punctuation">(</span><span class="token number">452</span> kB/s<span class="token punctuation">)</span>
Reading package lists<span class="token punctuation">..</span>. Done
Building dependency tree
Reading state information<span class="token punctuation">..</span>. Done
<span class="token number">2</span> packages can be upgraded. Run <span class="token string">'apt list --upgradable'</span> to see them.
root@ubuntu:/<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>输入<code>exit</code> 退出容器，如果想再次进入该容器，先试用 <code>docker ps -a</code> 查看容器状态，如果容器状态为退出，则需要先使用 <code>docker start</code> 启动容器，再使用 exec 命令进入一个正在运行的容器。</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>root@ubuntu:/<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token function">ps</span> -a
CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS                      PORTS                    NAMES
8a289fba83f7        ubuntu                          <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">6</span> minutes ago       Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">5</span> seconds ago                             my-ubuntu
9ff5f71f2327        ubuntu                          <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">16</span> minutes ago      Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">16</span> minutes ago                            kind_merkle
b3aa5185fa53        wingszzy/redisall               <span class="token string">&quot;/bin/sh -c /start.sh&quot;</span>   <span class="token number">29</span> hours ago        Up <span class="token number">29</span> hours                 <span class="token number">0.0</span>.0.0:6379-<span class="token operator">&gt;</span><span class="token number">6379</span>/tcp   romantic_nobel
9da7144ffe20        kali                            <span class="token string">&quot;/bin/bash&quot;</span>              <span class="token number">32</span> hours ago        Up <span class="token number">30</span> hours                 <span class="token number">0.0</span>.0.0:8888-<span class="token operator">&gt;</span><span class="token number">8888</span>/tcp   agitated_darwin
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">exec</span> -it 8a289fba83f7 /bin/bash
Error response from daemon: Container 8a289fba83f7bc4e777947e3dc429d871aa3bce67c1418698f9bb04c96f00403 is not running
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker start my-ubuntu
my-ubuntu
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">exec</span> -it 8a289fba83f7 /bin/bash
root@ubuntu:/<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>上述最后的命令中容器id也可以替换为容器名称，方便记忆，如：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token builtin class-name">exec</span> -it my-ubuntu /bin/bash
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="步骤-4：复制文件，路径映射"><a href="#步骤-4：复制文件，路径映射" class="header-anchor">#</a> 步骤 4：复制文件，路径映射</h2> <p>docker 提供了 cp 命令来实现容器与本机操作系统间的文件或文件夹传输，非常便捷，如：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token function">cp</span> key.txt my-ubuntu:/root
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">exec</span> -it my-ubuntu /bin/bash
root@ubuntu:/<span class="token comment"># ls /root</span>
key.txt
root@ubuntu:/<span class="token comment"># ll /root</span>
total <span class="token number">24</span>
drwx------ <span class="token number">1</span> root root    <span class="token number">4096</span> Sep <span class="token number">23</span> <span class="token number">11</span>:30 ./
drwxr-xr-x <span class="token number">1</span> root root    <span class="token number">4096</span> Sep <span class="token number">23</span> <span class="token number">11</span>:30 <span class="token punctuation">..</span>/
-rw------- <span class="token number">1</span> root root      <span class="token number">55</span> Sep <span class="token number">23</span> <span class="token number">11</span>:25 .bash_history
-rw-r--r-- <span class="token number">1</span> root root    <span class="token number">3106</span> Dec  <span class="token number">5</span>  <span class="token number">2019</span> .bashrc
-rw-r--r-- <span class="token number">1</span> root root     <span class="token number">161</span> Dec  <span class="token number">5</span>  <span class="token number">2019</span> .profile
-rw-r--r-- <span class="token number">1</span>  <span class="token number">501</span> dialout  <span class="token number">353</span> Sep <span class="token number">20</span> 09:49 key.txt
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>反过来也是一样的，命令的格式如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">help</span> <span class="token function">cp</span>

Usage:	docker <span class="token function">cp</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER:SRC_PATH DEST_PATH<span class="token operator">|</span>-
	docker <span class="token function">cp</span> <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> SRC_PATH<span class="token operator">|</span>- CONTAINER:DEST_PATH

Copy files/folders between a container and the <span class="token builtin class-name">local</span> filesystem
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>你也许会想拷贝来拷贝去真麻烦，有没有更简单的方法，当然有，那就是路径映射，比如将本地的 /Users/aaron/xxx 映射至 docker 的 /root/path/yyy ，那么本质上 /Users/aaron/xxx 和 /root/path/yyy 就是同一个文件夹，就省去了来回复制的麻烦。具体操作就是第一次启动容器时指定，注意也就是 <code>docker run</code> 命令时指定。</p> <p>比如</p> <p><code>docker run -it --hostname=ubuntu2 --name=my-ubuntu2 -v /Users/aaron/:/root/ ubuntu /bin/bash</code></p> <p>会启动一个新的容器，如下图所示：</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj0tkalm2aj325a0n41cq.jpg" alt="路径映射"></p> <h2 id="步骤-5：网络配置、端口映射"><a href="#步骤-5：网络配置、端口映射" class="header-anchor">#</a> 步骤 5：网络配置、端口映射</h2> <p>默认情况下，容器可以访问宿主机（安装 docker 的电脑）及宿主机外部的网络上的服务，但宿主机及外部网络无法访问容器内部的服务，这是为什么呢？</p> <p>回答这个问题需要先了解 docker 的网络，如果你了解虚拟机的网络，那么对比着理解即可。</p> <p>创建 docker 容器时，可以用 <code>--network string</code> 参数来指定四种网络模式：bridge（默认）、host、none、container。执行 <code>docker network ls</code> 可以看出(其中 container 未列出)：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker network <span class="token function">ls</span>
NETWORK ID          NAME                DRIVER              SCOPE
a3b7e595cd4e        bridge              bridge              <span class="token builtin class-name">local</span>
b49f580dfd98        <span class="token function">host</span>                <span class="token function">host</span>                <span class="token builtin class-name">local</span>
63ce10ba830f        none                null                <span class="token builtin class-name">local</span>
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>1、bridge，即桥接模式，docker run 的默认模式。</p> <p>此模式会为容器分配network namespace、设置 IP 等， 并将容器桥接到一个虚拟网桥 docker0 (docker0 只是个名字，后续版本就叫 bridge0) 上，可以和同一宿主机上桥接模式的其他容器进行通信。docker0 是 docker 在启动时在宿主机器上创建的虚拟网络接口，它会从 RFC 1918 定义的私有地址中随机选择一个主机不用的地址和子网掩码，并将它分配给 docker0，默认选择 172.18.0.1/16，一个 16 位的子网掩码给容器提供了 65534 个 IP 地址。 docker0 并不是正常的网络接口，只是一个在绑定到这上面的其他网卡间自动转发数据包的虚拟以太网桥，可以使容器与主机相互通信、容器与容器间相互通信。</p> <p>此模式可以理解为 docker 自己有个内部局域网环境，如果说 docker0 是个 wifi 信号的话，那这些容器就是连接这个热点的电脑。因此，容器可以访问宿主机（安装 docker 的电脑）及宿主机外部的网络上的服务，但宿主机及外部网络无法访问容器内部的服务。</p> <p>但是，可以通过端口映射的方式，让外网访问容器某些端口。 比如运行容器</p> <p><code>docker run -it -p 38022:22 --name='my-ubuntu-3' ubuntu /bin/bash</code> 之后，容器 my-ubuntu-3 的 22 端口被映射在了宿主机的 38022 端口，我们可以直接 <code>ssh root@localhost -p 38022</code> 来进入容器。如果要登陆成功，这里有个前提， ubuntu 容器已经开启 ssh 服务，允许 root ssh 远程登陆，且你知道 root 密码。</p> <p>在其他服务器上通过访问宿主机 ip 地址加端口即可访问容器，还可以一次映射多个端口。 运行容器 <code>docker run -it -p 38022:22 -p 38080:80 --name='my-ubuntu-4' ubuntu /bin/bash</code></p> <p>端口映射还可使用<code>-P</code>来实现将容器内部开放的网络端口随机映射到宿主机的一个端口上</p> <p>命令 <code>docker port container_ID</code> 可以查看容器的端口映射情况：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker port 805d8ef4b504
<span class="token number">22</span>/tcp -<span class="token operator">&gt;</span> <span class="token number">0.0</span>.0.0:38022
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2、host，主机模式。</p> <p>主机模式下，docker 共享主机的网络命名空间，也就是说<code>--network host</code> 表示容器与宿主机共用网卡、路由等。并且该容器不会分配自己的 IP 地址。如果在容器中运行一个监听端口 80 的应用，则该容器的应用在宿主机主机 IP 地址上的端口 80 上可用。</p> <p>例如，我们在 10.10.101.105/24 的机器上用 host 模式启动一个含有 web 应用的docker 容器，监听 tcp80 端口。当我们在容器中执行任何类似 ifconfig 命令查看网络环境时，看到的都是宿主机上的信息。而外界访问容器中的应用，则直接使用 10.10.101.105:80 即可，不用任何 NAT 转换，就如直接跑在宿主机中一样。但是，容器的其他方面，如文件系统、进程列表等还是和宿主机隔离的。</p> <p>如果您host对容器使用网络模式，则该容器的网络堆栈不会与Docker主机隔离（该容器共享主机的网络名称空间），并且该容器不会分配自己的IP地址。例如，如果您运行一个绑定到端口80 host 的容器并使用网络，则该容器的应用程序在主机IP地址上的端口80上可用。</p> <p>host 模式下，容器不拥有自己的 IP 地址 端口映射不生效，并且 -p，--publish，-P，和 --publish-all 选项都将被忽略</p> <p>主机模式网络对于优化性能以及在容器需要处理大量端口的情况下很有用，因为它不需要网络地址转换（NAT），并且不会为每个端口创建“ userland-proxy”。</p> <p>主机模式仅适用于Linux主机，而 Mac 的 Docker Desktop，Windows 的 DockerDesktop 或 Windows Server 的 Docker EE 不支持。</p> <p>3、container，容器模式。</p> <p>跟 host 模式类似，只不过其网络命名空间共享的对象为一个容器而非宿主机。</p> <p>4、none。</p> <p>none 表示容器默认有自己的 network namespace，但不为 docker 容器进行任何网络配置， 这将所有网络创建操作完全自定义，实现更加灵活复杂的网络。</p> <h2 id="步骤-6：自定义镜像：保存修改后的容器至新的镜像"><a href="#步骤-6：自定义镜像：保存修改后的容器至新的镜像" class="header-anchor">#</a> 步骤 6：自定义镜像：保存修改后的容器至新的镜像</h2> <p>命令： <code>docker commit 容器id 镜像名称</code></p> <p>只要我们不执行 <code>docker rm</code> 来删除容器，那么对该容器的修改一直有效，但通常情况下，我们对容器作出一些修改，是为了给别人用，比如将自己的程序部署在容器中打包成镜像，目的是为了发布出去方便别人直接使用。那么就需要将对容器的修改保存为新的镜像。</p> <p>例如本例子中：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker <span class="token builtin class-name">exec</span> -it my_host /bin/bash
root@docker-desktop:/<span class="token comment"># ls</span>
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
root@docker-desktop:/<span class="token comment"># cd root</span>
root@docker-desktop:~<span class="token comment"># ls</span>
root@docker-desktop:~<span class="token comment"># touch saved.txt</span>
root@docker-desktop:~<span class="token comment"># ls</span>
saved.txt
root@docker-desktop:~<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker commit my_host my_ubuntu_image
sha256:3ae070a40b8da2411a0b212e8e78a7f02a19820fd45f67288b436c427316e34e
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker images
REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
my_ubuntu_image          latest              3ae070a40b8d        <span class="token number">4</span> seconds ago       171MB
kali                     latest              c9c07bf9ce32        <span class="token number">2</span> days ago          <span class="token number">1</span>.74GB
ubuntu                   latest              bb0eaf4eee00        <span class="token number">7</span> days ago          <span class="token number">72</span>.9MB
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker run -it my_ubuntu_image /bin/bash
root@114112c6194d:/<span class="token comment"># ll /root/</span>
total <span class="token number">24</span>
drwx------ <span class="token number">1</span> root root <span class="token number">4096</span> Sep <span class="token number">24</span> 07:20 ./
drwxr-xr-x <span class="token number">1</span> root root <span class="token number">4096</span> Sep <span class="token number">24</span> 07:20 <span class="token punctuation">..</span>/
-rw------- <span class="token number">1</span> root root   <span class="token number">38</span> Sep <span class="token number">24</span> 07:20 .bash_history
-rw-r--r-- <span class="token number">1</span> root root <span class="token number">3106</span> Dec  <span class="token number">5</span>  <span class="token number">2019</span> .bashrc
-rw-r--r-- <span class="token number">1</span> root root  <span class="token number">161</span> Dec  <span class="token number">5</span>  <span class="token number">2019</span> .profile
-rw-r--r-- <span class="token number">1</span> root root    <span class="token number">0</span> Sep <span class="token number">24</span> 07:19 saved.txt
root@114112c6194d:/<span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="步骤-7：发布镜像"><a href="#步骤-7：发布镜像" class="header-anchor">#</a> 步骤 7：发布镜像</h2> <p>1、先在 <a href="https://hub.docker.com/" target="_blank" rel="noopener noreferrer">https://hub.docker.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 上注册一个账号，并创建一个仓库，比如长这样：</p> <p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gj22rf7xigj31qg0u0grt.jpg" alt="创建一个docker仓库"></p> <p>2、使用第 1 步的账号密码在 Docker Desktop 上登陆。</p> <p>3、注意，我们创建的仓库是 somenzz/my-kali，因此先执行 <code>docker tag my-kali somenzz/my-kali</code> 给已存在的镜像打个标签，然后执行 <code>docker push somenzz/my-kali</code> 上传本地镜像。</p> <p>4、如果是公开的仓库，其他人执行<code>docker pull somenzz/my-kali</code> 即可下载你上传的镜像来使用。</p> <p>执行细节如下：</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code><span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker tag my-kali somenzz/my-kali
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker images
REPOSITORY               TAG                 IMAGE ID            CREATED             SIZE
my-kali                  latest              975cbe3a4619        <span class="token number">14</span> minutes ago      <span class="token number">1</span>.83GB
somenzz/my-kali          latest              975cbe3a4619        <span class="token number">14</span> minutes ago      <span class="token number">1</span>.83GB
my_ubuntu_image          latest              3ae070a40b8d        <span class="token number">24</span> minutes ago      171MB
kali                     latest              c9c07bf9ce32        <span class="token number">2</span> days ago          <span class="token number">1</span>.74GB
ubuntu                   latest              bb0eaf4eee00        <span class="token number">7</span> days ago          <span class="token number">72</span>.9MB
<span class="token punctuation">(</span>py38env<span class="token punctuation">)</span> ➜  ~ docker push somenzz/my-kali
The push refers to repository <span class="token punctuation">[</span>docker.io/somenzz/my-kali<span class="token punctuation">]</span>
4ed57b65cfb6: Pushed
8baabf99a4c6: Pushing  <span class="token number">1</span>.629GB/1.629GB
8e0f65c626fe: Pushing  <span class="token number">102</span>.7MB/113.8MB
<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="步骤-8：管理本地镜像和容器"><a href="#步骤-8：管理本地镜像和容器" class="header-anchor">#</a> 步骤 8：管理本地镜像和容器</h2> <p>将指定镜像保存成 tar 归档文件，用于持久化镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker save -o my_ubuntu.tar ubuntu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>从归档文件中创建镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">import</span> my_ubuntu.tar my-ubuntu
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>将指定容器的文件系统保存成 tar 归档文件，用于持久化容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token builtin class-name">export</span> containerID/containerName <span class="token operator">&gt;</span> /home/export.tar
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>列出所有的容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">ps</span> -a
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>列出最近一次启动的容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">ps</span> -l
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>检查镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect image-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>检查容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取容器的相关信息:</p> <p>获取容器CID</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{.Id}}'</span> container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取容器PID</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{.State.Pid}}'</span> container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取容器IP</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{.NetworkSettings.IPAddress}}'</span> container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取容器网关</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{.NetworkSettings.Gateway}}'</span> container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取容器 MAC</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker inspect -f <span class="token string">'{{.NetworkSettings.MacAddress}}'</span> container-name/containerID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>停止容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker stop containerID/container-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>停止所有容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">kill</span> <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>启动容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker start containerID/container-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除单个正在运行的容器，删除容器之前要先停止该容器的运行</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker stop containerID/container-name
docker <span class="token function">rm</span> containerID/container-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>删除所有容器</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker <span class="token function">kill</span> <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span> docker <span class="token function">rm</span> <span class="token variable"><span class="token variable">$(</span>docker <span class="token function">ps</span> -a -q<span class="token variable">)</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除镜像</p> <div class="language-sh line-numbers-mode"><pre class="language-sh"><code>docker rmi image-name
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="系统性的-docker-学习资料"><a href="#系统性的-docker-学习资料" class="header-anchor">#</a> 系统性的 docker 学习资料</h2> <p>分享一些可以系统学习 Docker 的地方，对于新手来说很有帮助。这些都是权威科学的学习教程，不必记录网址，记录中文名称，搜索引擎搜索即可。</p> <ol><li><a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">docker 官方文档: https://docs.docker.com/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.docker.com/blog/" target="_blank" rel="noopener noreferrer">docker 官方博客: https://www.docker.com/blog/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.docker.org.cn/" target="_blank" rel="noopener noreferrer">docker 中文社区: https://www.docker.org.cn/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://study.163.com/course/introduction/1002892012.htm#/courseDetail" target="_blank" rel="noopener noreferrer">动手玩docker：网易云免费课堂<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h2 id="容器比虚拟机的优势"><a href="#容器比虚拟机的优势" class="header-anchor">#</a> 容器比虚拟机的优势</h2> <p>由于容器是进程级别的，相比虚拟机有很多优势。 （1）启动快：容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多。 （2）资源占用少 ：容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源。 （3）体积小：容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包，所以容器文件比虚拟机文件要小很多。 总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小得多</p> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>本文从使用 docker 的整个生命周期的顺序进行讲述，方便理解和记忆：从安装 docker 软件，下载镜像，启动容器，文件传输，网络设置，端口映射，保存容器到镜像，发布镜像等应有仅有，值得入门学习和收藏。</p> <p>（完）</p> <p>写到这里感觉身体被掏空，觉得有用请点赞、再看、转发支持，感谢老铁陪伴。</p></div> <footer class="page-edit" style="display:none;"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/25/2020, 7:01:08 AM</span></div></footer> <!----></main> <!----> <div style="display:none;" data-v-319dd33c data-v-319dd33c><div class="comments-wrapper" data-v-319dd33c><div class="valine-wrapper"><div id="valine"></div></div></div></div></div></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-a81d141e data-v-a81d141e><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-a81d141e><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-a81d141e></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-a81d141e></path></svg></div><!----></div></div>
    <script src="/assets/js/app.4e05e597.js" defer></script><script src="/assets/js/4.8584deb7.js" defer></script><script src="/assets/js/1.8dfdb017.js" defer></script><script src="/assets/js/55.567c2917.js" defer></script><script src="/assets/js/12.67b2ec68.js" defer></script>
  </body>
</html>
