(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{694:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("今天刷到了微软在 2021 年发布的文本转语音服务（TTS），试了下，真的听不出这是机器在读，而且，可以分辨出中文的多音字，如士大夫和大(dai)夫，儿化音也可以连起来，可以自动推断出语气，非常智能。感觉以后的播音员要失业了。")]),s._v(" "),a("p",[s._v("大家先来听一段官方的样例，看一看能否听得出这是机器人读的？")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxgem5ayvkj31fg0s4gpe.jpg",alt:""}})]),s._v(" "),a("p",[s._v("如果感兴趣，可以在"),a("a",{attrs:{href:"https://azure.microsoft.com/en-us/services/cognitive-services/text-to-speech/?ocid=AID3027325#features",target:"_blank",rel:"noopener noreferrer"}},[s._v("这里"),a("OutboundLink")],1),s._v("自己测试下。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://tva1.sinaimg.cn/large/008i3skNgy1gxgf5akq8tj32340to419.jpg",alt:""}})]),s._v(" "),a("p",[s._v("要是微信读书里面的机器人可以这么读，那体验就更好了。")]),s._v(" "),a("p",[s._v("微软也给出了 Python 语言调用该服务的代码：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" azure"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cognitiveservices"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("speech "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" speechsdk\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Creates an instance of a speech config with specified subscription key and service region.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# Replace with your own subscription key and service region (e.g., "westus").')]),s._v("\nspeech_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" service_region "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"YourSubscriptionKey"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"YourServiceRegion"')]),s._v("\nspeech_config "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" speechsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SpeechConfig"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("subscription"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("speech_key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" region"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("service_region"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Creates a speech synthesizer using the default speaker as audio output.")]),s._v("\nspeech_synthesizer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" speechsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SpeechSynthesizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("speech_config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("speech_config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Receives a text from console input.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Type some text that you want to speak..."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntext "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("input")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Synthesizes the received text to speech.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# The synthesized speech is expected to be heard on the speaker with this line executed.")]),s._v("\nresult "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" speech_synthesizer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("speak_text_async"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Checks result.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reason "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" speechsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ResultReason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("SynthesizingAudioCompleted"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Speech synthesized to speaker for text [{}]"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("text"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("elif")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reason "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" speechsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ResultReason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Canceled"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    cancellation_details "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cancellation_details\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Speech synthesis canceled: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cancellation_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" cancellation_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reason "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" speechsdk"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("CancellationReason"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" cancellation_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Error details: {}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("cancellation_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("error_details"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Did you update the subscription info?"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("p",[s._v("运行上述代码，需要你在微软的 Azure 注册一个账号，可以免费试用，具体"),a("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/azure/cognitive-services/speech-service/get-started-text-to-speech?tabs=script%2Cwindowsinstall&pivots=programming-language-python",target:"_blank",rel:"noopener noreferrer"}},[s._v("教程"),a("OutboundLink")],1),s._v("见文末。")]),s._v(" "),a("h2",{attrs:{id:"最后的话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后的话"}},[s._v("#")]),s._v(" 最后的话")]),s._v(" "),a("p",[s._v("相信在不久的将来，我们完全分辨不出听到的声音是真人发出的还是机器人发出的。")]),s._v(" "),a("p",[s._v("推荐阅读：")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://mp.weixin.qq.com/s/Uj6-xLi7lzRDYKUG7NUrXg",target:"_blank",rel:"noopener noreferrer"}},[s._v("FastAPI：快速开发一个文本转语音的接口"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=e.exports}}]);