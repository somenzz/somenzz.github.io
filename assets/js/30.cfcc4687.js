(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{487:function(s,t,a){s.exports=a.p+"assets/img/gzh.fa018fe9.jpg"},841:function(s,t,a){"use strict";a.r(t);var n=a(7),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("视频的每一帧就是一张图片，跟踪视频中的某一对象，分解下来，其实就是在每一帧的图片中找到那个对象。")]),s._v(" "),n("p",[s._v("既然要找到那个对象，就要先定义这个目标对象，既然是图片，那就有颜色，先了解下常用的 3 中颜色模型。")]),s._v(" "),n("ol",[n("li",[n("p",[s._v("RGB。RGB 就是三原色光模式，又称 RGB 颜色模型或红绿蓝颜色模型，是一种加色模型，将红、绿、蓝三原色的色光以不同的比例相加，以合成产生各种色彩光。每一个像素点都有都有 3 个值表示颜色，这是最常见的颜色模型了。OpenCV 中的顺序是 BGR。")])]),s._v(" "),n("li",[n("p",[s._v("灰度图。简单的理解，就是黑白图，图像的每个 像素点 只能有 一个值 表示颜色，像素值范围是 [0~255]，现有的成熟分析算法多是基于灰度图像。")])]),s._v(" "),n("li",[n("p",[s._v("HSV。这个模型中颜色的参数分别是色调（H）、饱和度（S）和明度（V）.HSV对用户来说是一种直观的颜色模型。我们可以从一种纯色彩开始，即指定色彩角H，并让V=S=1，然后我们可以通过向其中加入黑色和白色来得到我们需要的颜色。")])])]),s._v(" "),n("p",[s._v("以上三个模型，使用 HSV 定义彩色模型更为方便。")]),s._v(" "),n("p",[s._v("OpenCV 可以很方便的从 BGR 转换为灰度图，从 BGR 转换为 HSV：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" cv2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cv\ncv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cvtColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("input_image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("COLOR_BGR2GRAY"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ncv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cvtColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("input_image"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("  cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("COLOR_BGR2HSV"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("现在我们知道如何将 BGR 图像转换为 HSV，我们可以使用它来提取彩色对象。 在 HSV 中，表示颜色比在 BGR 颜色空间中更容易。")]),s._v(" "),n("p",[s._v("接下来，我们将在视频中追踪蓝色对象。")]),s._v(" "),n("p",[s._v("步骤：")]),s._v(" "),n("ol",[n("li",[s._v("拍摄视频的每一帧")]),s._v(" "),n("li",[s._v("从 BGR 转换为 HSV 颜色空间")]),s._v(" "),n("li",[s._v("我们将 HSV 图像阈值设置为蓝色范围")]),s._v(" "),n("li",[s._v("单独提取蓝色对象，可以在该图像上做任何我们想做的事情。")])]),s._v(" "),n("p",[s._v("下面是详细注释的代码：")]),s._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" cv2 "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" cv\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" numpy "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" np\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 从默认的摄像头读取视频")]),s._v("\ncap "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("VideoCapture"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("while")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取视频的每一帧")]),s._v("\n    _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" frame "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cap"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# BGR 转换为 HSV")]),s._v("\n    hsv "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cvtColor"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("COLOR_BGR2HSV"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用 HSV 定义目标对象的颜色范围。")]),s._v("\n    lower_blue "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("110")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    upper_blue "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" np"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("array"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("130")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("255")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 生成一个 HSV 遮罩只获取蓝色对象。")]),s._v("\n    mask "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inRange"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("hsv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" lower_blue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" upper_blue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#应用")]),s._v("\n    res "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bitwise_and"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mask"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mask"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imshow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'frame'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("frame"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imshow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mask'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mask"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("imshow"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'res'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("res"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    k "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" cv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("waitKey"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0xFF")]),s._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" k "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("27")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("break")]),s._v("\ncv"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("destroyAllWindows"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("效果图：\n"),n("img",{attrs:{src:"https://tva1.sinaimg.cn/large/e6c9d24egy1h48ez4ux44j20ci03djrb.jpg",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"最后"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[s._v("#")]),s._v(" 最后")]),s._v(" "),n("p",[s._v("如果帮助，请在看支持。")]),s._v(" "),n("p",[n("img",{attrs:{src:a(487),alt:"扫码关注公众号"}})])])}),[],!1,null,null,null);t.default=e.exports}}]);