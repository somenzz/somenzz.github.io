(window.webpackJsonp=window.webpackJsonp||[]).push([[74],{654:function(s,a,p){"use strict";p.r(a);var n=p(7),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,p=s._self._c||a;return p("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[p("p",[s._v("我在使用 psycopg2-binary 遇到两个坑，写出来，看看你收否踩过，如果没有，可以看一下，以后避免跳坑。")]),s._v(" "),p("h2",{attrs:{id:"坑1-尽可能不要使用-psycopg2-binary"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#坑1-尽可能不要使用-psycopg2-binary"}},[s._v("#")]),s._v(" 坑1.  尽可能不要使用 psycopg2-binary")]),s._v(" "),p("p",[s._v("官方文档说了，psycopg2-binary 不需要编译，可以认为是绿色版，是为了初学者用 Python 快速和 PostgreSQL 进行连接而用的， 如果你在 pypi 上发包，也不应该依赖 psycopg2-binary，应该直接依赖 psycopg2。")]),s._v(" "),p("p",[s._v("我没听，直接再生产环境用了 psycopg2-binary，版本 2.7.5 ，结果就中招了，在使用 server-side-cursor （named cursor）的时候，经常出现读数据库卡住不动的情况，怀疑跟这个版本的 bug 有关系。")]),s._v(" "),p("p",[s._v("为啥不直接从源代码安装，因为总是报 pg_config  not found 之类的错误，而生产环境，安装一个 postgresql-lib 是相当麻烦的。")]),s._v(" "),p("p",[s._v("我想这也是 python 的缺点之一，依赖的包很多需要编译，而编译就会出现缺少各种各样的包的问题，这样就不能称之为跨平台了，我在 mac 上写好，弄到 linux 上，还得折腾一大堆，java 这一点就很好。")]),s._v(" "),p("p",[s._v("最后怎么解决的呢，升级到最新版本的 psycopg2-binary 就解决了，如果再出现，只能老老实实安装 postgresql-lib。")]),s._v(" "),p("h2",{attrs:{id:"坑2-尽可能不要-pip-install-whl-文件"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#坑2-尽可能不要-pip-install-whl-文件"}},[s._v("#")]),s._v(" 坑2.  尽可能不要 pip install whl 文件")]),s._v(" "),p("p",[s._v("这次我离线下载了  psycopg2-binary 的文件，"),p("code",[s._v("psycopg2_binary-2.8.6-cp36-cp36m-manylinux1_x86_64.whl")])]),s._v(" "),p("p",[s._v("我分别试了两种方法，第二种成功：")]),s._v(" "),p("p",[s._v("方法一：")]),s._v(" "),p("div",{staticClass:"language-sh line-numbers-mode"},[p("pre",{pre:!0,attrs:{class:"language-sh"}},[p("code",[s._v("pip "),p("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" psycopg2_binary-2.8.6-cp36-cp36m-manylinux1_x86_64.whl\n")])]),s._v(" "),p("div",{staticClass:"line-numbers-wrapper"},[p("span",{staticClass:"line-number"},[s._v("1")]),p("br")])]),p("p",[s._v("方法一在执行 import psycopg2.extras 时报错，方法二没有。")]),s._v(" "),p("p",[s._v("方法二：")]),s._v(" "),p("div",{staticClass:"language-sh line-numbers-mode"},[p("pre",{pre:!0,attrs:{class:"language-sh"}},[p("code",[s._v("pip "),p("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" psycopg2-binary --no-index -f ./\n")])]),s._v(" "),p("div",{staticClass:"line-numbers-wrapper"},[p("span",{staticClass:"line-number"},[s._v("1")]),p("br")])]),p("p",[s._v("足以说明，使用 pip 最好还是联网环境。")]),s._v(" "),p("h2",{attrs:{id:"最后的话"}},[p("a",{staticClass:"header-anchor",attrs:{href:"#最后的话"}},[s._v("#")]),s._v(" 最后的话")]),s._v(" "),p("p",[s._v("在使用开源软件包时，一定要看下官方文档的说明，尤其那些注意事项，这样就可以节省很多排错时间。")])])}),[],!1,null,null,null);a.default=t.exports}}]);